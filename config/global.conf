# =============================================================================
# global.conf - 전역 백업 시스템 설정
# =============================================================================
# 이 파일의 값은 모든 서비스 백업에 공통 적용됩니다.
# 서비스별 config/services/*.conf 에서 개별 재정의 가능합니다.

# -----------------------------------------------------------------------------
# [백업 서버 SFTP 접속 정보]
# -----------------------------------------------------------------------------
SFTP_HOST=backup.example.com
SFTP_PORT=22
SFTP_USER=backupuser
# SSH 키 인증 (권장)
SFTP_KEY_FILE=/home/backupuser/.ssh/backup_rsa
# 패스워드 인증 (비권장 - 키 인증 사용 시 비워두기)
SFTP_PASS=

# 업로드 재시도 횟수
SFTP_RETRY=3
# 연결 타임아웃 (초)
SFTP_TIMEOUT=30

# 원격 베이스 디렉토리
SFTP_REMOTE_BASE=/backup

# -----------------------------------------------------------------------------
# [Slack 알림 설정]
# -----------------------------------------------------------------------------
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_DEFAULT_CHANNEL=#backup-alerts
SLACK_SECURITY_CHANNEL=#security-alerts
SLACK_BOT_NAME=BackupBot
SLACK_ICON_EMOJI=:floppy_disk:

# 실패 시에만 알림 (true) 또는 모든 결과 알림 (false)
SLACK_NOTIFY_ON_FAILURE_ONLY=true

# -----------------------------------------------------------------------------
# [로컬 임시 작업 디렉토리]
# -----------------------------------------------------------------------------
# 백업 파일을 임시로 만드는 로컬 경로 (SFTP 전송 후 삭제)
LOCAL_TMP_DIR=/tmp/backup_staging

# 스크립트 실행 로그 저장 경로
LOG_BASE_DIR=/var/log/backup-system
LOG_LEVEL=1   # 0=DEBUG, 1=INFO, 2=WARN, 3=ERROR

# -----------------------------------------------------------------------------
# [보존 정책]
# -----------------------------------------------------------------------------
# 백업 파일 보존 기간 (일) - 백업 서버 기준
RETENTION_DAYS=30

# 일별 보존, 주별 보존, 월별 보존 설정
DAILY_RETENTION=7
WEEKLY_RETENTION=4    # 주차별 1개씩 4주 보존
MONTHLY_RETENTION=12  # 월별 1개씩 12개월 보존

# -----------------------------------------------------------------------------
# [암호화 설정]
# -----------------------------------------------------------------------------
ENCRYPT_BACKUP=false
# openssl AES-256-CBC 패스프레이즈
ENCRYPT_PASSPHRASE=

# -----------------------------------------------------------------------------
# [백업 항목 활성화 여부 (기본값)]
# -----------------------------------------------------------------------------
BACKUP_DB_ENABLED=true
BACKUP_WEB_ENABLED=true
BACKUP_APP_LOG_ENABLED=true
BACKUP_OS_LOG_ENABLED=true

# -----------------------------------------------------------------------------
# [모니터링 설정]
# -----------------------------------------------------------------------------
# 백업 파일 최소 크기 (bytes) - 이 이하이면 이상으로 판단
MONITOR_MIN_FILE_SIZE=1024

# 백업 파일 최대 허용 경과 시간 (시간) - 이 이상이면 누락으로 판단
MONITOR_MAX_AGE_HOURS=26

# 모니터링 리포트 저장 경로
MONITOR_REPORT_DIR=/var/log/backup-system/reports
