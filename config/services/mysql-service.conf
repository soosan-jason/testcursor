# =============================================================================
# mysql-service.conf - MySQL 서비스 백업 설정 예시
# =============================================================================
# global.conf 의 값을 이 파일에서 재정의하면 서비스별 독립 설정 가능

# 서비스 식별자 (영문, 하이픈 허용, 공백 불가)
SERVICE_NAME=mysql-service

# 서비스 설명
SERVICE_DESC="메인 MySQL 서비스"

# 백업 활성화 여부
BACKUP_ENABLED=true

# -----------------------------------------------------------------------------
# [DB 백업 설정 - MySQL/MariaDB]
# -----------------------------------------------------------------------------
BACKUP_DB_ENABLED=true
DB_TYPE=mysql          # mysql | mariadb | postgresql | mongodb

DB_HOST=localhost
DB_PORT=3306
DB_USER=backupuser
DB_PASS=SecurePassword123
# 특정 DB만 백업 (공백 구분, 비우면 전체)
DB_NAMES="myapp_db analytics_db"
# 제외할 테이블 (공백 구분)
DB_EXCLUDE_TABLES=""
# mysqldump 추가 옵션
DB_EXTRA_OPTS="--single-transaction --routines --triggers --events"

# -----------------------------------------------------------------------------
# [웹/앱 모듈 백업 설정]
# -----------------------------------------------------------------------------
BACKUP_WEB_ENABLED=true
# 백업할 디렉토리 목록 (콜론 구분)
WEB_SOURCE_DIRS="/var/www/myapp:/opt/myapp/config"
# 제외 패턴 (tar --exclude 형식, 공백 구분)
WEB_EXCLUDE_PATTERNS="*.log *.tmp node_modules .git __pycache__"

# -----------------------------------------------------------------------------
# [앱 로그 백업 설정]
# -----------------------------------------------------------------------------
BACKUP_APP_LOG_ENABLED=true
APP_LOG_DIRS="/var/log/myapp:/opt/myapp/logs"
# 며칠치 로그 수집 (0=당일)
APP_LOG_DAYS=1
# 로그 파일 패턴
APP_LOG_PATTERN="*.log *.log.gz"

# -----------------------------------------------------------------------------
# [OS 로그 백업]
# -----------------------------------------------------------------------------
BACKUP_OS_LOG_ENABLED=true
OS_LOG_DIRS="/var/log"
OS_LOG_FILES="syslog auth.log kern.log dpkg.log"
OS_LOG_DAYS=1

# -----------------------------------------------------------------------------
# [SFTP 원격 경로]
# -----------------------------------------------------------------------------
# ${SFTP_REMOTE_BASE}/${SERVICE_NAME}/YYYYMMDD/ 형식으로 자동 구성
# 재정의가 필요하면 여기에 작성
# SFTP_REMOTE_PATH=/backup/custom-path

# -----------------------------------------------------------------------------
# [보존 정책 재정의]
# -----------------------------------------------------------------------------
RETENTION_DAYS=60

# -----------------------------------------------------------------------------
# [암호화 재정의]
# -----------------------------------------------------------------------------
# ENCRYPT_BACKUP=true
# ENCRYPT_PASSPHRASE=MyServiceSecretKey

# -----------------------------------------------------------------------------
# [복원 설정]
# -----------------------------------------------------------------------------
# 복원 시 기본 대상 호스트 (비우면 원본 호스트)
RESTORE_TARGET_HOST=localhost
RESTORE_TARGET_DB_USER=root
